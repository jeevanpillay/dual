# CLI Module Implementation Plan

## Overview

Implement the `dual` CLI binary with subcommand parsing using clap v4 derive macros. This is the foundation module â€” all other modules will plug into this CLI structure.

## Current State Analysis

- `src/main.rs`: Hello World placeholder
- `Cargo.toml`: No dependencies
- No modules, no lib.rs

## Desired End State

A working `dual` binary that:
- Parses subcommands: launch (default), list, destroy, open, urls
- Shows help text and version
- Calls stub handlers that print "not yet implemented" for each command
- Passes `cargo build`, `cargo test`, `cargo clippy`

## What We're NOT Doing

- Real command implementations (those come from downstream modules)
- Config file parsing (that's the config module)
- Any Docker, tmux, or git operations
- Interactive TUI or fuzzy picker

## Implementation Approach

Single-phase implementation: add clap, define CLI structure, implement stubs, add tests.

## Phase 1: CLI Entry Point

### Changes Required:

#### 1. Add clap dependency
**File**: `Cargo.toml`
Add `clap` with derive feature.

#### 2. Implement CLI structure
**File**: `src/main.rs`
- Define `Cli` struct with clap derive
- Define `Command` enum for subcommands
- Default (no subcommand) = launch
- Subcommands: list, destroy, open, urls
- Stub handlers for each

#### 3. Add module structure
**File**: `src/cli.rs`
- CLI definition and parsing logic separated from main

### Success Criteria:

#### Automated Verification:
- [ ] `cargo build` succeeds
- [ ] `cargo test` passes
- [ ] `cargo clippy` clean (no warnings)
- [ ] `cargo fmt --check` passes
- [ ] `dual --help` shows usage
- [ ] `dual --version` shows version
- [ ] `dual list` runs without error
- [ ] `dual destroy` runs without error
- [ ] `dual open` runs without error
- [ ] `dual urls` runs without error

## References

- Research: `thoughts/shared/research/2026-02-13-BUILD-cli.md`
- SPEC.md: CLI Commands section
